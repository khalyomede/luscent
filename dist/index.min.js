!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).luscent={})}(this,(function(e){"use strict";var t=function(e,t,n,a,c){for(var l=null!=c?c:document,s=0,i=Array.from(l.querySelectorAll("[data-luscent-if]"));s<i.length;s++){var u=i[s];if(u instanceof HTMLElement){var r=u.id,d=r.length>0,f=u.dataset.luscentIf;if(void 0!==f)if(f in n)if(n[f](e.state)){var h=u.dataset.luscentTemplate;if(void 0===h){d?console.warn('The element with id "'.concat(r,'" could not be shown/hidden because it has an empty data-luscent-template')):console.warn("An element could not be shown/hidden because it has an empty data-luscent-template");continue}var m=document.getElementById(h);if(null===m||!(m instanceof HTMLTemplateElement)){d?console.warn('The element with id "'.concat(r,'" could not be shown/hidden because no template exist with id empty data-luscent-template="').concat(h,'"')):console.warn('An element could not be shown/hidden because no template exist with id empty data-luscent-template="'.concat(h,'"'));continue}for(var w=m.content.cloneNode(!0),p="luscent-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),v=0,b=Array.from(w.childNodes).filter((function(e){return e instanceof HTMLElement}));v<b.length;v++){b[v].dataset.luscentId=p}u.textContent="",u.appendChild(w);for(var y=0,g=Array.from(document.querySelectorAll('[data-luscent-id="'.concat(p,'"]')));y<g.length;y++){var T=g[y];o(e,t,n,a,T)}}else u.textContent="";else d?console.warn('The element with id "'.concat(r,'" could not be shown/hidden because it uses data-luscent-if="').concat(f,'" but no conditions was found with this key')):console.warn('An element could not be shown/hidden because it uses data-luscent-if="'.concat(f,'" but no conditions was found with this key'));else d?console.warn('The element with id "'.concat(r,'" cannot be shown/hidden because data-luscent-if target an empty key.')):console.warn("An element cannot be shown/hidden because data-luscent-if target an empty key.")}}},n=function(e,t,n,a,c){for(var l=null!=c?c:document,s=0,i=Array.from(l.querySelectorAll("[data-luscent-for]"));s<i.length;s++){var u=i[s];if(u instanceof HTMLElement){var r=u.id,d=r.length>0,f=u.dataset.luscentFor;if(void 0!==f)if(f in a){var h=u.dataset.luscentTemplate;if(void 0!==h){var m=document.getElementById(h);if(null!==m&&m instanceof HTMLTemplateElement){u.textContent="";for(var w=0,p=a[f](e.state);w<p.length;w++){for(var v=p[w],b=m.content.cloneNode(!0),y="luscent-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),g=0,T=Array.from(b.childNodes).filter((function(e){return e instanceof HTMLElement}));g<T.length;g++){T[g].dataset.luscentId=y}u.appendChild(b);for(var A=0,E=Array.from(document.querySelectorAll('[data-luscent-id="'.concat(y,'"]')));A<E.length;A++){var I=E[A];o(e,t,n,a,I,v)}}}else d?console.warn('The element with id "'.concat(r,'" could not iterate because no template exists with id data-luscent-template="').concat(h,'".')):console.warn('An element could not iterate because no template exists with id data-luscent-template="'.concat(h,'".'))}else d?console.warn('The element with id "'.concat(r,'" could not iterate because it has an empty data-luscent-template.')):console.warn("An element could not iterate because it has an empty data-luscent-template.")}else d?console.warn('The element with id "'.concat(r,'" could not iterate because it uses data-luscent-for="').concat(f,'" but no list was found with this key.')):console.warn('An element could not iterate because it uses data-luscent-for="'.concat(f,'" but no list was found with this key.'));else d?console.warn('The element with id "'.concat(r,'" cannot iterate because data-luscent-for targets an empty key.')):console.warn("An element cannot iterate because data-luscent-for targets an empty key.")}}},a=function(e,t,n,a){(null!=n?n:document).querySelectorAll("[data-luscent-value]").forEach((function(n){if(a||!n.closest("[data-luscent-for]")){var o=n.getAttribute("data-luscent-value"),c=null===o||0===o.trim().length,l=n.id.trim().length>0,s=n.id;if(c)l?console.warn('The element id "'.concat(s,'" seems to have a data-luscent-value with an empty value. Please fill it to let the UI update pursue correctly.')):console.warn("It seems you have a data-luscent-value with an empty value. Please fill it to let the UI update pursue correctly.");else if(a||t.hasOwnProperty(o)){console.log("Running getter ".concat(o));var i=a?a[o]:t[o](e.state);console.log("value was",i),n instanceof HTMLInputElement?n.value=i:n.textContent=i}else l?console.warn('The element id "'.concat(s,'" content with data-luscent-value="').concat(o,'" could not be rendered because a getter with the same name could not be found.')):console.warn('The UI rendering failed for an element content with data-luscent-value="'.concat(o,'" could not be rendered because a getter with the same name Could not be found.'))}else console.log("skipping data-luscent-value because closest is luscent-for")}))},o=function(e,o,c,l,s,i){console.log("DOM will be updated with"),console.log(e.state),a(e,o,s,i),t(e,o,c,l,s),l&&n(e,o,c,l,s)},c=function(e,t,n,a,c){document.querySelectorAll("[data-luscent-on-click]").forEach((function(l){var s=l.getAttribute("data-luscent-on-click");s&&n[s]&&l.addEventListener("click",(function(l){e.state=n[s](e.state,l),o(e,t,a,c)}))})),document.querySelectorAll("[data-luscent-on-submit]").forEach((function(l){var s=l.getAttribute("data-luscent-on-submit");s&&n[s]&&l.addEventListener("submit",(function(l){l.preventDefault(),e.state=n[s](e.state,l),o(e,t,a,c)}))}))},l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},s=function(e,t,n,a){for(var c=function(c){if(!(c instanceof HTMLElement))return"continue";var s=c.id,i=s.trim().length>0,u=c.dataset.luscentOnInputBind;return void 0===u?(i?console.warn('Please specify a key when using data-luscent-on-input-bind on the element with id "'.concat(s,'".')):console.warn("Please specify a key when using data-luscent-on-input-bind."),{value:void 0}):c instanceof HTMLInputElement?void c.addEventListener("input",(function(c){var s;if(c instanceof InputEvent){var i=c.target;e.state=l(l({},e.state),((s={})[u]=i.value,s)),o(e,t,n,a)}})):(i?console.warn('It seems you tried to bind a value (using data-luscent-on-input-bind="'.concat(u,'") on the element with id "').concat(s,"\" that is not an HTMLInputElement. This won't make the data reactive.")):console.warn('It seems you tried to bind a value (using data-luscent-on-input-bind="'.concat(u,"\") on an element that is not an HTMLInputElement. This won't make the data reactive.")),"continue")},s=0,i=Array.from(document.querySelectorAll("[data-luscent-on-input-bind]"));s<i.length;s++){var u=c(i[s]);if("object"==typeof u)return u.value}},i=function(e){var t=e.state||{},n=e.methods||{},a=e.getters||{},l=e.conditions||{},i=e.lists||{},u={state:t};o(u,a,l,i),c(u,a,n,l,i),s(u,a,l,i),console.log("Luscent app started successfully")};e.start=i}));