!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).luscent={})}(this,(function(e){"use strict";var t=function(e,t,n,a,o,s){for(var c=null!=s?s:document,i=0,u=Array.from(c.querySelectorAll("[data-luscent-if]"));i<u.length;i++){var r=u[i];if(r instanceof HTMLElement){var d=r.id,h=d.length>0,f=r.dataset.luscentIf;if(void 0!==f)if(f in a)if(a[f](e.state)){var m=r.dataset.luscentTemplate;if(void 0===m){h?console.warn('The element with id "'.concat(d,'" could not be shown/hidden because it has an empty data-luscent-template')):console.warn("An element could not be shown/hidden because it has an empty data-luscent-template");continue}var p=document.getElementById(m);if(null===p||!(p instanceof HTMLTemplateElement)){h?console.warn('The element with id "'.concat(d,'" could not be shown/hidden because no template exist with id empty data-luscent-template="').concat(m,'"')):console.warn('An element could not be shown/hidden because no template exist with id empty data-luscent-template="'.concat(m,'"'));continue}for(var w=p.content.cloneNode(!0),v="luscent-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),b=0,y=Array.from(w.childNodes).filter((function(e){return e instanceof HTMLElement}));b<y.length;b++){y[b].dataset.luscentId=v}r.textContent="",r.appendChild(w);for(var g=0,T=Array.from(document.querySelectorAll('[data-luscent-id="'.concat(v,'"]')));g<T.length;g++){var A=T[g];l(e,t,n,a,o,A)}}else r.textContent="";else h?console.warn('The element with id "'.concat(d,'" could not be shown/hidden because it uses data-luscent-if="').concat(f,'" but no conditions was found with this key')):console.warn('An element could not be shown/hidden because it uses data-luscent-if="'.concat(f,'" but no conditions was found with this key'));else h?console.warn('The element with id "'.concat(d,'" cannot be shown/hidden because data-luscent-if target an empty key.')):console.warn("An element cannot be shown/hidden because data-luscent-if target an empty key.")}}},n=function(e,t){for(var n=0,a=Array.from(e.querySelectorAll("[data-luscent-id]"));n<a.length;n++){var o=a[n];if(!(o instanceof HTMLElement))return;var s=o.dataset.luscentId;if(s&&s in t){var c=t[s];o.dataset.luscentRenderedId=String(c)}}},a=function(e,t,a,o,s,c){for(var i=null!=c?c:document,u=0,r=Array.from(i.querySelectorAll("[data-luscent-for]"));u<r.length;u++){var d=r[u];if(d instanceof HTMLElement){var h=d.id,f=h.length>0,m=d.dataset.luscentFor;if(void 0!==m)if(m in s){var p=d.dataset.luscentTemplate;if(void 0!==p){var w=document.getElementById(p);if(null!==w&&w instanceof HTMLTemplateElement){d.textContent="";for(var v=0,b=s[m](e.state);v<b.length;v++){for(var y=b[v],g=w.content.cloneNode(!0),T="luscent-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),A=0,E=Array.from(g.childNodes).filter((function(e){return e instanceof HTMLElement}));A<E.length;A++){E[A].dataset.luscentKey=T}d.appendChild(g);for(var I=0,L=Array.from(document.querySelectorAll('[data-luscent-key="'.concat(T,'"]')));I<L.length;I++){var O=L[I];n(O,y),l(e,t,a,o,s,O,y)}}}else f?console.warn('The element with id "'.concat(h,'" could not iterate because no template exists with id data-luscent-template="').concat(p,'".')):console.warn('An element could not iterate because no template exists with id data-luscent-template="'.concat(p,'".'))}else f?console.warn('The element with id "'.concat(h,'" could not iterate because it has an empty data-luscent-template.')):console.warn("An element could not iterate because it has an empty data-luscent-template.")}else f?console.warn('The element with id "'.concat(h,'" could not iterate because it uses data-luscent-for="').concat(m,'" but no list was found with this key.')):console.warn('An element could not iterate because it uses data-luscent-for="'.concat(m,'" but no list was found with this key.'));else f?console.warn('The element with id "'.concat(h,'" cannot iterate because data-luscent-for targets an empty key.')):console.warn("An element cannot iterate because data-luscent-for targets an empty key.")}}},o=function(e,t,n,a){(null!=n?n:document).querySelectorAll("[data-luscent-value]").forEach((function(n){if(a||!n.closest("[data-luscent-for]")){var o=n.getAttribute("data-luscent-value"),s=null===o||0===o.trim().length,c=n.id.trim().length>0,l=n.id;if(s)c?console.warn('The element id "'.concat(l,'" seems to have a data-luscent-value with an empty value. Please fill it to let the UI update pursue correctly.')):console.warn("It seems you have a data-luscent-value with an empty value. Please fill it to let the UI update pursue correctly.");else if(a||t.hasOwnProperty(o)){var i=a?a[o]:t[o](e.state);n instanceof HTMLInputElement?n.value=i:n.textContent=i}else c?console.warn('The element id "'.concat(l,'" content with data-luscent-value="').concat(o,'" could not be rendered because a getter with the same name could not be found.')):console.warn('The UI rendering failed for an element content with data-luscent-value="'.concat(o,'" could not be rendered because a getter with the same name Could not be found.'))}else console.log("skipping data-luscent-value because closest is luscent-for")}))},s=function(e,t,n,a,o,s){for(var c,i=null!=s?s:document,u=document.evaluate('//*[./@*[starts-with(name(), "data-luscent-on-")]]',i,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=function(s){var i=u.snapshotItem(s);if(i instanceof HTMLElement){var r=Object.keys(i.dataset);if(r.some((function(e){return e.endsWith("Bind")})))return"continue";var d=null!==(c=r.filter((function(e){return e.startsWith("luscentOn")}))[0])&&void 0!==c?c:"",h=d.replace("luscentOn","").toLowerCase(),f=i.dataset[d],m="luscentOn".concat(h.charAt(0).toUpperCase()+h.slice(1),"Bound");if("true"===i.dataset[m])return"continue";f&&n[f]&&(i.addEventListener(h,(function(s){"submit"===h&&s.preventDefault();var c=i.dataset.luscentRenderedId;e.state=n[f](e.state,s,c),l(e,t,n,a,o)}),{passive:"submit"!==h,capture:!0}),i.dataset[m]="true")}},d=0;d<u.snapshotLength;d++)r(d)},c=function(e,t){for(var n=null!=t?t:document,a=0,o=Array.from(n.querySelectorAll("[data-luscent-on-input-bind]"));a<o.length;a++){var s=o[a];if(s instanceof HTMLElement){var c=s.id,l=c.trim().length>0,i=s.dataset.luscentOnInputBind;if(void 0!==i)if(i in e.state)if(s instanceof HTMLInputElement){var u=e.state[i];s.value=String(u)}else l?console.warn('The element with id "'.concat(c,'" has data-luscent-on-input-bind="').concat(i,'" but is not an input element. Cannot sync with state.')):console.warn('An element has data-luscent-on-input-bind="'.concat(i,'" but is not an input element. Cannot sync with state.'));else l?console.warn('The element with id "'.concat(c,'" has data-luscent-on-input-bind="').concat(i,'", but no corresponding state property exists.')):console.warn('An element has data-luscent-on-input-bind="'.concat(i,'", but no corresponding state property exists.'));else l?console.warn('The element with id "'.concat(c,'" has an empty data-luscent-on-input-bind attribute. Cannot sync with state.')):console.warn("An element has an empty data-luscent-on-input-bind attribute. Cannot sync with state.")}}},l=function(e,n,l,i,u,r,d){o(e,n,r,d),c(e,r),t(e,n,l,i,u,r),u&&a(e,n,l,i,u,r),s(e,n,l,i,u,r)},i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},u=function(e,t,n,a,o){for(var s=document.evaluate('//*[./@*[starts-with(name(), "data-luscent-on-") and substring(name(), string-length(name()) - 4) = "-bind"]]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),c=0;c<s.snapshotLength;c++){var u=s.snapshotItem(c);if(u instanceof HTMLElement)for(var r=u.id,d=r.trim().length>0,h=function(s){var c=s.replace("luscentOn","").replace("Bind","").toLowerCase(),h=u.dataset[s],f="luscentOn".concat(c.charAt(0).toUpperCase()+c.slice(1),"BindBound");return"true"===u.dataset[f]?"continue":h?u instanceof HTMLInputElement?(u.addEventListener(c,(function(s){var c;if(s instanceof InputEvent){var u=s.target;e.state=i(i({},e.state),((c={})[h]=u.value,c)),l(e,t,n,a,o)}})),void(u.dataset[f]="true")):(d?console.warn("It seems you tried to bind a value (using data-luscent-on-".concat(c,'-bind="').concat(h,'") on the element with id "').concat(r,"\" that is not an HTMLInputElement. This won't make the data reactive.")):console.warn("It seems you tried to bind a value (using data-luscent-on-".concat(c,'-bind="').concat(h,"\") on an element that is not an HTMLInputElement. This won't make the data reactive.")),"continue"):(d?console.warn("Please specify a key when using data-luscent-on-".concat(c,'-bind on the element with id "').concat(r,'".')):console.warn("Please specify a key when using data-luscent-on-".concat(c,"-bind.")),"continue")},f=0,m=Object.keys(u.dataset).filter((function(e){return e.startsWith("luscentOn")&&e.endsWith("Bind")}));f<m.length;f++){h(m[f])}}},r=function(e){var t=e.state||{},n=e.methods||{},a=e.getters||{},o=e.conditions||{},s=e.lists||{},c={state:t};l(c,a,n,o,s),u(c,a,n,o,s),console.log("Luscent app started successfully")};e.start=r}));