!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).luscent={})}(this,(function(e){"use strict";var t=function(e,t,n,a,o,l){for(var s=null!=l?l:document,i=0,u=Array.from(s.querySelectorAll("[data-luscent-if]"));i<u.length;i++){var r=u[i];if(r instanceof HTMLElement){var d=r.id,f=d.length>0,h=r.dataset.luscentIf;if(void 0!==h)if(h in a)if(a[h](e.state)){var m=r.dataset.luscentTemplate;if(void 0===m){f?console.warn('The element with id "'.concat(d,'" could not be shown/hidden because it has an empty data-luscent-template')):console.warn("An element could not be shown/hidden because it has an empty data-luscent-template");continue}var p=document.getElementById(m);if(null===p||!(p instanceof HTMLTemplateElement)){f?console.warn('The element with id "'.concat(d,'" could not be shown/hidden because no template exist with id empty data-luscent-template="').concat(m,'"')):console.warn('An element could not be shown/hidden because no template exist with id empty data-luscent-template="'.concat(m,'"'));continue}for(var w=p.content.cloneNode(!0),v="luscent-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),y=0,b=Array.from(w.childNodes).filter((function(e){return e instanceof HTMLElement}));y<b.length;y++){b[y].dataset.luscentId=v}r.textContent="",r.appendChild(w);for(var g=0,T=Array.from(document.querySelectorAll('[data-luscent-id="'.concat(v,'"]')));g<T.length;g++){var A=T[g];c(e,t,n,a,o,A)}}else r.textContent="";else f?console.warn('The element with id "'.concat(d,'" could not be shown/hidden because it uses data-luscent-if="').concat(h,'" but no conditions was found with this key')):console.warn('An element could not be shown/hidden because it uses data-luscent-if="'.concat(h,'" but no conditions was found with this key'));else f?console.warn('The element with id "'.concat(d,'" cannot be shown/hidden because data-luscent-if target an empty key.')):console.warn("An element cannot be shown/hidden because data-luscent-if target an empty key.")}}},n=function(e,t){for(var n=0,a=Array.from(e.querySelectorAll("[data-luscent-id]"));n<a.length;n++){var o=a[n];if(!(o instanceof HTMLElement))return;var l=o.dataset.luscentId;if(l&&l in t){var c=t[l];o.dataset.luscentRenderedId=String(c)}}},a=function(e,t,n,a,o,l){for(var s,i=null!=l?l:document,u=document.evaluate('//*[./@*[starts-with(name(), "data-luscent-on-")]]',i,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=function(l){var i=u.snapshotItem(l);if(i instanceof HTMLElement){console.log("found node",i);var r=Object.keys(i.dataset);if(r.some((function(e){return e.endsWith("Bind")})))return"continue";var d=null!==(s=r.filter((function(e){return e.startsWith("luscentOn")}))[0])&&void 0!==s?s:"",f=d.replace("luscentOn","").toLowerCase(),h=i.dataset[d],m="luscentOn".concat(f.charAt(0).toUpperCase()+f.slice(1),"Bound");if("true"===i.dataset[m])return"continue";h&&n[h]&&(i.addEventListener(f,(function(l){"submit"===f&&l.preventDefault();var s=i.dataset.luscentRenderedId;e.state=n[h](e.state,l,s),c(e,t,n,a,o)})),i.dataset[m]="true")}},d=0;d<u.snapshotLength;d++)r(d)},o=function(e,t,o,l,s,i){for(var u=null!=i?i:document,r=0,d=Array.from(u.querySelectorAll("[data-luscent-for]"));r<d.length;r++){var f=d[r];if(f instanceof HTMLElement){var h=f.id,m=h.length>0,p=f.dataset.luscentFor;if(void 0!==p)if(p in s){var w=f.dataset.luscentTemplate;if(void 0!==w){var v=document.getElementById(w);if(null!==v&&v instanceof HTMLTemplateElement){f.textContent="";for(var y=0,b=s[p](e.state);y<b.length;y++){for(var g=b[y],T=v.content.cloneNode(!0),A="luscent-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),E=0,I=Array.from(T.childNodes).filter((function(e){return e instanceof HTMLElement}));E<I.length;E++){I[E].dataset.luscentKey=A}f.appendChild(T);for(var L=0,k=Array.from(document.querySelectorAll('[data-luscent-key="'.concat(A,'"]')));L<k.length;L++){var M=k[L];n(M,g),a(e,t,o,l,s,M),c(e,t,o,l,s,M,g)}}}else m?console.warn('The element with id "'.concat(h,'" could not iterate because no template exists with id data-luscent-template="').concat(w,'".')):console.warn('An element could not iterate because no template exists with id data-luscent-template="'.concat(w,'".'))}else m?console.warn('The element with id "'.concat(h,'" could not iterate because it has an empty data-luscent-template.')):console.warn("An element could not iterate because it has an empty data-luscent-template.")}else m?console.warn('The element with id "'.concat(h,'" could not iterate because it uses data-luscent-for="').concat(p,'" but no list was found with this key.')):console.warn('An element could not iterate because it uses data-luscent-for="'.concat(p,'" but no list was found with this key.'));else m?console.warn('The element with id "'.concat(h,'" cannot iterate because data-luscent-for targets an empty key.')):console.warn("An element cannot iterate because data-luscent-for targets an empty key.")}}},l=function(e,t,n,a){(null!=n?n:document).querySelectorAll("[data-luscent-value]").forEach((function(n){if(a||!n.closest("[data-luscent-for]")){var o=n.getAttribute("data-luscent-value"),l=null===o||0===o.trim().length,c=n.id.trim().length>0,s=n.id;if(l)c?console.warn('The element id "'.concat(s,'" seems to have a data-luscent-value with an empty value. Please fill it to let the UI update pursue correctly.')):console.warn("It seems you have a data-luscent-value with an empty value. Please fill it to let the UI update pursue correctly.");else if(a||t.hasOwnProperty(o)){var i=a?a[o]:t[o](e.state);n instanceof HTMLInputElement?n.value=i:n.textContent=i}else c?console.warn('The element id "'.concat(s,'" content with data-luscent-value="').concat(o,'" could not be rendered because a getter with the same name could not be found.')):console.warn('The UI rendering failed for an element content with data-luscent-value="'.concat(o,'" could not be rendered because a getter with the same name Could not be found.'))}else console.log("skipping data-luscent-value because closest is luscent-for")}))},c=function(e,n,a,c,s,i,u){l(e,n,i,u),t(e,n,a,c,s,i),s&&o(e,n,a,c,s,i)},s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},i=function(e,t,n,a,o){for(var l=function(l){if(!(l instanceof HTMLElement))return"continue";var i=l.id,u=i.trim().length>0,r=l.dataset.luscentOnInputBind;return void 0===r?(u?console.warn('Please specify a key when using data-luscent-on-input-bind on the element with id "'.concat(i,'".')):console.warn("Please specify a key when using data-luscent-on-input-bind."),{value:void 0}):l instanceof HTMLInputElement?void l.addEventListener("input",(function(l){var i;if(l instanceof InputEvent){var u=l.target;e.state=s(s({},e.state),((i={})[r]=u.value,i)),c(e,t,n,a,o)}})):(u?console.warn('It seems you tried to bind a value (using data-luscent-on-input-bind="'.concat(r,'") on the element with id "').concat(i,"\" that is not an HTMLInputElement. This won't make the data reactive.")):console.warn('It seems you tried to bind a value (using data-luscent-on-input-bind="'.concat(r,"\") on an element that is not an HTMLInputElement. This won't make the data reactive.")),"continue")},i=0,u=Array.from(document.querySelectorAll("[data-luscent-on-input-bind]"));i<u.length;i++){var r=l(u[i]);if("object"==typeof r)return r.value}},u=function(e){var t=e.state||{},n=e.methods||{},o=e.getters||{},l=e.conditions||{},s=e.lists||{},u={state:t};c(u,o,n,l,s),a(u,o,n,l,s),i(u,o,n,l,s),console.log("Luscent app started successfully")};e.start=u}));