<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo demo - Luscent</title>
</head>

<body>
    <form data-luscent-on-submit="addTodo">
        <input type="text" data-luscent-on-input-bind="taskTitle" />
        <button type="submit">add</button>
    </form>
    <p data-luscent-if="noTodoAdded" data-luscent-template="no-todo-added"></p>
    <ul data-luscent-if="someTodoAdded" data-luscent-template="todo-list"></ul>
    <p>
        <span data-luscent-value="tasksCount"></span>
    </p>

    <template id="no-todo-added">
        Please use the form below to add your tasks.
    </template>

    <template id="todo-list">
        <li data-luscent-for="taskList" data-luscent-as="task">
            <span data-luscent-value="task.title"></span>
        </li>
    </template>

    <script src="index.js"></script>
    <script>
        const { start } = window.luscent;

        start({
            state: {
                taskTitle: "",
                tasks: [],
            },
            methods: {
                addTodo: (state) => ({
                    ...state,
                    tasks: [
                        ...state.tasks,
                        { title: state.taskTitle },
                    ],
                }),
            },
            getters: {
                tasksCount: ({ tasks }) => tasks.length,
            },
            conditions: {
                someTodoAdded: ({ tasks }) => tasks.length > 0,
                noTodoAdded: ({ tasks }) => tasks.length === 0,
            },
        });
    </script>
</body>

</html>